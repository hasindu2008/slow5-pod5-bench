slow5
=====

cf.sh
-----
Config file.

Example:

Update the git commit for slow5lib.

	export LIB_COMMIT=blah...

Run slow5_sequential_cxxpool in xpm.sh and bench.sh.

	export RUN_CXX=1

Change the flags used in build.sh and build_cxxpool.sh.

	export CCFLAGS='-Wall -O2 -g -Werror'

Change the desired record and signal compression.

	export REC_PRESS=zlib
	export SIG_PRESS=none

conv.sh
-------
Convert a slow5 (or blow5) file to a blow5 file with the desired compression as
specified in cf.sh and index it.

This script should be used to ensure that the same zstd library version is used
in the compression of different blow5 files.

Usage:

	./conv.sh <in_slow5> <out_blow5>

Example:

Convert pig.slow5 to blow5 file cow.blow5 and index it.

	./conv.sh pig.slow5 cow.blow5

randid.sh
---------
Print the IDs from a slow5 (or blow5) file in random order.

Usage:

	./randid.sh <slow5>

Example:

	./randid.sh cow.blow5 > cow.ids

xpm.sh
------
Run benchmarking experiment for fixed number of threads and batch size.

Usage:

	./xpm.sh <blow5> <ids> <nr_thr> <batch_size>

Example:

Benchmark using blow5 file cow.blow5, IDs from cow.ids for random access, 16 number
of threads and a batch size of 1024. Save standard output and error to bench.out.

	./xpm.sh cow.blow5 cow.ids 16 1024 > xpm.out 2>&1

The results are written to:

	cow.blow5.slow5_random_t16_b1024_err
	cow.blow5.slow5_random_t16_b1024_out
	cow.blow5.slow5_sequential_t16_b1024_err
	cow.blow5.slow5_sequential_t16_b1024_out

bench.sh
--------
Run benchmarking experiment varying the number of threads and batch size.

Usage:

	./bench.sh <blow5> <ids>

Example:

	./bench.sh cow.blow5 cow.ids > bench.out 2>&1

benchmany.sh
------------
Run benchmarking experiment on one or more blow5 files, keeping the number of
threads and batch size constant.

Usage:

	./benchmany.sh <blow5> <ids>...

Example:

	./benchmany.sh cow.blow5 cow.ids hog.blow5 hog.ids > benchmany.out 2>&1

setup.sh
--------
Setup the environment for benchmarking.

- check slow5lib is on the desired commit (chklib.sh)
- compile benchmarking programs (bench.sh)
- download and compile slow5tools (install-tools.sh)

Usage:

	./setup.sh
